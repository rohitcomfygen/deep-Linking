<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deep Link Test</title>
</head>

<body>
  <div id="app"></div>
  <script>
    const app = document.getElementById('app');
    const APP_SCHEME = `Eyision://news`;
    const PLAY_STORE = `https://play.google.com/store/apps/details?id=com.app.eysion`;
    const APP_STORE = `https://apps.apple.com/app/idYOUR_APP_ID`;

    function openApp() {
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;
      const isAndroid = /android/i.test(userAgent);
      const isIOS = /iPhone|iPad|iPod/i.test(userAgent);

      const start = Date.now();

      if (isAndroid) {
        // Create a hidden iframe for Android deep link handling
        const iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.src = APP_SCHEME;
        document.body.appendChild(iframe);
      } else {
        // Directly try to open for iOS
        window.location = APP_SCHEME;
      }

      // After a short delay, check if the app didn't open and redirect
      setTimeout(() => {
        if (Date.now() - start < 2200) {
          window.location = isAndroid ? PLAY_STORE : APP_STORE;
        }
      }, 2000);
    }

    app.innerHTML = `
      <h1>Deep Link Test Page</h1>
      <p>Path: ${window.location.pathname}</p>
      <p>Query: ${window.location.search}</p>
      <p>Full URL: ${window.location.href}</p>
      <button onclick="openApp()">Open App</button>
    `;
  </script>
</body>

</html>